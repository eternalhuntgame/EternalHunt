<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Eternal Hunt Game</title>
  <style>
    body { font-family:'Trebuchet MS',sans-serif; background:#111; color:#eee; text-align:center; margin:0; padding:0;}
    h1 { color:#ff4444; text-shadow:0 0 10px #f00; animation:fadePulse 3s infinite alternate; }
    .tab-buttons button { margin:5px; padding:10px 15px; border-radius:8px; border:none; background:#333; color:#eee; cursor:pointer; transition:transform .2s, background .3s;}
    .tab-buttons button:hover { transform:scale(1.05); background:#444;}
    .tab-buttons button.active { background:#ff4444; box-shadow:0 0 10px #f00;}
    .tab { display:none; padding:20px; animation:fadeIn .5s;}
    .tab.active { display:block; }
    .quest.completed { text-decoration:line-through; color:#aaa; }
    @keyframes fadeIn { from{opacity:0;} to{opacity:1;} }
    @keyframes fadePulse { from{opacity:.8;} to{opacity:1;} }

    /* Codex animations */
    .codex-entry { opacity:0; transform:translateY(10px); animation:entryFade .8s forwards; }
    @keyframes entryFade { to{opacity:1; transform:translateY(0);} }
    .highlight { color:#ff4444; text-shadow:0 0 8px #f00; animation:glowFade 2s ease forwards; }
    @keyframes glowFade { 0%{opacity:0;} 30%{opacity:1;} 100%{color:#eee; text-shadow:none;} }
    .typing { border-right:2px solid #ff4444; white-space:nowrap; overflow:hidden; display:inline-block; animation:blinkCursor 0.8s infinite; }
    @keyframes blinkCursor { 50%{border-color:transparent;} }
  </style>
</head>
<body>
  <h1>üê∫ Eternal Hunt</h1>
  <div class="tab-buttons">
    <button onclick="openTab('profile')" class="active">Profile</button>
    <button onclick="openTab('hunt')">Hunt</button>
    <button onclick="openTab('train')">Train</button>
    <button onclick="openTab('pvp')">PvP</button>
    <button onclick="openTab('inventory')">Inventory</button>
    <button onclick="openTab('shop')">Shop</button>
    <button onclick="openTab('quests')">Quests</button>
    <button onclick="openTab('codex')">Codex</button>
    <button onclick="openTab('leaderboard')">Leaderboard</button>
  </div>

  <!-- Profile -->
  <div id="profile" class="tab active">
    <h2>Your Profile</h2>
    <p>Set your Discord username:</p>
    <input type="text" id="usernameInput" placeholder="Wolf#1234" />
    <button onclick="saveUsername()">Save</button>

    <h3>Select Your Role</h3>
    <button onclick="setRole('Wolf')">üê∫ Wolf</button>
    <button onclick="setRole('Hunter')">üèπ Hunter</button>
    <p id="usernameDisplay"></p>
    <p id="roleDisplay"></p>
  </div>

  <!-- Tabs -->
  <div id="hunt" class="tab"><h2>Hunt</h2><button onclick="hunt()">Hunt Prey</button><p id="huntResult"></p></div>
  <div id="train" class="tab"><h2>Train</h2><button onclick="train()">Train (+Strength)</button><p id="trainResult"></p></div>
  <div id="pvp" class="tab"><h2>PvP Arena</h2><button onclick="pvp()">Quick Match</button><div id="pvpResult"></div></div>
  <div id="inventory" class="tab"><h2>Inventory</h2><ul id="inventoryList"></ul></div>
  <div id="shop" class="tab"><h2>Relic Shop</h2>
    <button onclick="buyItem('Moonfang Dagger',50)">Moonfang Dagger (50 $PREY)</button>
    <button onclick="buyItem('Relic of the Ancients',150)">Relic of the Ancients (150 $PREY)</button>
    <button onclick="buyItem('Totem of the Alpha',300)">Totem of the Alpha (300 $PREY)</button>
    <p id="shopResult"></p>
  </div>
  <div id="quests" class="tab"><h2>Quests</h2><ul id="questList"></ul></div>
  <div id="codex" class="tab"><h2>Lore Codex</h2><div id="codexEntries"></div></div>
  <div id="leaderboard" class="tab"><h2>Leaderboard</h2><ol id="leaderboardList"></ol></div>

  <!-- Sounds -->
  <audio id="wolfHowl" src="https://actions.google.com/sounds/v1/animals/wolf_howl.ogg"></audio>
  <audio id="bowTwang" src="https://actions.google.com/sounds/v1/foley/bow_pull_release.ogg"></audio>

  <script>
    let prey=0,strength=1,level=1,xp=0;
    let username=localStorage.getItem('username')||"Unknown Wolf";
    let role=localStorage.getItem('role')||"None";
    let inventory=JSON.parse(localStorage.getItem('inventory')||'[]');
    let leaderboard=JSON.parse(localStorage.getItem('leaderboard')||'[]');
    let quests=[];
    let unlockedCodex=JSON.parse(localStorage.getItem('codex')||'[]');

    const wolfCodex=[
      "The First Howl shook the skies when the Alpha rose.",
      "Under the Blood Moon, wolves gained strength beyond mortal limits.",
      "The Relics were crafted from the bones of fallen gods.",
      "The Totem of the Alpha binds the pack as one spirit.",
      "The Eternal Fang can slay even the undying.",
      "Whispers tell of a hidden Moon Temple deep in shadow forests.",
      "Loyal wolves who fall return as Spirits of the Eternal Hunt.",
      "Only the strongest Alpha may challenge the Eternal Alpha.",
      "The final prophecy: when Hunters fall, Wolves ascend eternal."
    ];
    const hunterCodex=[
      "The first Hunters swore an oath under starlight.",
      "Silver arrows were forged to pierce the wolves‚Äô hide.",
      "The Order of the Hunt was founded to protect mankind.",
      "The Charm of Precision guided arrows through darkness.",
      "The Relic of Ancients once belonged to the First Hunter.",
      "The Cloak of the Eternal Hunt conceals the chosen.",
      "Hunters believe wolves carry fragments of cursed gods.",
      "To slay the Alpha is to claim the Hunt‚Äôs Crown.",
      "The final prophecy: when Wolves fall, Hunters reign eternal."
    ];

    function openTab(tab){
      document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
      document.getElementById(tab).classList.add('active');
      document.querySelectorAll('.tab-buttons button').forEach(b=>b.classList.remove('active'));
      document.querySelector(`.tab-buttons button[onclick="openTab('${tab}')"]`).classList.add('active');
      if(tab==='codex') renderCodex();
    }

    function saveUsername(){
      username=document.getElementById('usernameInput').value||"Unknown";
      localStorage.setItem('username',username);
      document.getElementById('usernameDisplay').textContent=`Username: ${username}`;
    }

    function setRole(chosen){
      role=chosen;
      localStorage.setItem('role',role);
      unlockedCodex=[];
      save();
      document.getElementById('roleDisplay').textContent=`Your Role: ${role==="Wolf"?"üê∫ Wolf":"üèπ Hunter"}`;
    }

    function unlockCodexEntry(){
      let codexList = role==="Wolf"?wolfCodex:hunterCodex;
      if(unlockedCodex.length<codexList.length){
        const newEntry = codexList[unlockedCodex.length];
        unlockedCodex.push(newEntry);
        renderNewCodexEntry(newEntry);

        // Play role-specific sound
        if(role==="Wolf") document.getElementById('wolfHowl').play();
        if(role==="Hunter") document.getElementById('bowTwang').play();
      }
    }

    function renderCodex(){
      const container=document.getElementById('codexEntries');
      container.innerHTML="";
      if(unlockedCodex.length===0){ 
        container.innerHTML="<p>No lore unlocked yet. Complete quests to reveal the Hunt.</p>"; 
        return; 
      }
      unlockedCodex.forEach((entry,i)=>{
        let p=document.createElement('p'); 
        p.textContent=`${i+1}. ${entry}`;
        p.classList.add("codex-entry");
        container.appendChild(p);
      });
    }

    function renderNewCodexEntry(text){
      const container=document.getElementById('codexEntries');
      const p=document.createElement('p');
      p.classList.add("codex-entry","highlight","typing");
      p.textContent="";
      container.appendChild(p);

      // typewriter effect
      let i=0;
      function typeWriter(){
        if(i<text.length){
          p.textContent+=text.charAt(i);
          i++;
          setTimeout(typeWriter,50);
        }else{
          p.classList.remove("typing");
        }
      }
      typeWriter();
    }

    function save(){
      localStorage.setItem('inventory',JSON.stringify(inventory));
      localStorage.setItem('leaderboard',JSON.stringify(leaderboard));
      localStorage.setItem('username',username);
      localStorage.setItem('role',role);
      localStorage.setItem('codex',JSON.stringify(unlockedCodex));
    }
  </script>
</body>
</html>
